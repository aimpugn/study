# semantics

- [semantics](#semantics)
    - [semantics?](#semantics-1)
    - [의미론의 정의와 존재](#의미론의-정의와-존재)
    - [의미론 정의의 단계](#의미론-정의의-단계)
    - [구체적인 구현 과정](#구체적인-구현-과정)

## semantics?

의미론(semantics)은 프로그래밍 언어 이론에서 코드의 의미와 동작을 설명하는 개념입니다.
이는 코드가 어떻게 실행되고, 어떤 결과를 초래하는지를 정의합니다.

의미론은 프로그래밍 언어의 구문(syntax)과는 달리, 코드의 의미와 그 실행 결과에 초점을 맞춥니다.

의미론은 언어 설계 단계에서 정의되며, 언어 명세서에 문서화됩니다.
이후 언어 구현자가 이를 기반으로 인터프리터나 컴파일러를 구현합니다.
구문 파싱, AST 생성, 의미론적 분석 등의 과정을 통해 의미론이 코드 실행에 반영됩니다.
이를 통해 언어가 일관되게 동작하도록 보장합니다.

## 의미론의 정의와 존재

의미론은 다음과 같은 세 가지 주요 접근 방식으로 정의됩니다:

- **Denotational Semantics (표기적 의미론)**:

    각 언어 구문을 수학적 객체로 해석합니다.

    예를 들어, 함수형 언어의 경우 도메인 이론(domain theory)으로 번역됩니다.
    이는 언어의 구문을 수학적 공간의 객체로 매핑하여 의미를 정의합니다.

- **Operational Semantics (작동적 의미론)**:

    언어의 실행을 직접적으로 설명합니다.
    이는 추상 기계(abstract machine)를 정의하고, 구문이 기계의 상태에 어떤 변화를 일으키는지를 설명합니다.

    예를 들어, 람다 계산법(lambda calculus)은 구문의 변환을 통해 의미를 정의합니다.

- **Axiomatic Semantics (공리적 의미론)**:

    구문에 적용되는 공리를 설명하여 의미를 정의합니다.
    이는 구문의 의미와 논리적 공식이 동일하게 취급됩니다.
    대표적인 예로는 호어 논리(Hoare logic)가 있습니다.

의미론(semantics)은 프로그래밍 언어의 설계 단계에서 정의됩니다. 이는 언어의 구문(syntax)과 동작을 명확히 규정하여, 언어가 일관되게 동작하도록 보장합니다. PHP에서 트레잇과 같은 기능의 의미론은 다음과 같은 단계에서 정의되고 구현됩니다:

## 의미론 정의의 단계

1. **언어 설계 단계**:

    **언어 설계자**가 새로운 기능(예: 트레잇)을 설계할 때,
    그 기능이 어떻게 동작해야 하는지에 대한 의미론을 정의합니다.

    PHP의 경우 이 단계에서 트레잇의 동작, 메서드 우선순위, 추상 메서드 요구사항 등의 규칙이 결정됩니다.

2. **언어 명세 작성**:

    설계된 의미론은 **언어 명세서**(language specification)에 문서화됩니다.
    이는 언어의 공식 문서로, 언어의 모든 구문과 그 의미를 정의합니다.

    PHP의 경우, PHP 언어 명세서에 트레잇의 의미론이 포함됩니다.

3. **구현 단계**:

    **언어 구현자**(예: PHP 개발자)가 C 언어로 PHP 인터프리터를 구현할 때,
    명세서에 정의된 의미론을 코드로 구현합니다.

    이 과정에서 트레잇의 구문을 파싱하고, 이를 기반으로 동작을 정의합니다.

## 구체적인 구현 과정

1. **구문 파싱 (Syntax Parsing)**:

   PHP 스크립트가 실행될 때, 먼저 구문 분석기(parser)가 스크립트를 파싱하여 **추상 구문 트리(AST)**를 생성합니다.
   트레잇의 구문도 이 과정에서 파싱됩니다.

2. **추상 구문 트리 (AST) 생성**:

   파싱된 구문은 AST로 변환됩니다.
   AST는 코드의 구조를 트리 형태로 표현한 것입니다.
   트레잇의 메서드와 속성도 AST의 일부로 포함됩니다.

3. **의미론적 분석 (Semantic Analysis)**:

   AST를 기반으로 의미론적 분석이 수행됩니다.
   이 단계에서 트레잇의 의미론적 규칙이 적용됩니다.

   예를 들어, 메서드 우선순위, 추상 메서드 구현 여부 등이 이 단계에서 검증됩니다.

4. **코드 생성 및 실행 (Code Generation and Execution)**:

   의미론적 분석이 완료된 AST는 바이트코드 또는 기계어로 변환되어 실행됩니다.
   트레잇의 동작도 이 과정에서 구현됩니다.

PHP에서 트레잇의 의미론적 규칙이 어떻게 적용되는지 예를 들어 설명하겠습니다:

```php
trait TraitA {
    public function methodA() {
        echo "TraitA Method A";
    }
}

class ClassB {
    // 1. 구문 파싱: `use TraitA;` 구문이 파싱되어 AST에 포함됩니다.
    use TraitA;

    // 2. 의미론적 분석: `ClassB`가 `TraitA`를 사용하고, `ClassB`에 동일한 이름의 `methodA`가 정의되어 있으므로 
    //    클래스의 메서드가 우선합니다.
    public function methodA() {
        echo "ClassB Method A";
    }
}

$obj = new ClassB();
// 3. 코드 생성 및 실행: `ClassB`의 `methodA`가 호출되어 "ClassB Method A"가 출력됩니다.
$obj->methodA(); // "ClassB Method A" 출력
```
