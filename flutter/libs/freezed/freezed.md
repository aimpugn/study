# freezed

- [freezed](#freezed)
    - [`freezed` for immutable](#freezed-for-immutable)
    - [`freezed` 사용하여 모델 생성](#freezed-사용하여-모델-생성)
    - [sealed class](#sealed-class)

## [`freezed`](https://pub.dev/packages/freezed) for immutable

```dart
part 'default_info.freezed.dart';
part 'default_info.g.dart';

@freezed
class DefaultInfo with _$DefaultInfo {
  const factory DefaultInfo({
    required String email,
    required String password,
  }) = _DefaultInfo;

  factory DefaultInfo.fromJson(Map<String, Object?> json) =>
      _$DefaultInfoFromJson(json);
}
```

- 사이드 이펙트 없도록 하고, 상태 변경이 필요 없으며, 데이터 일관성 보장 위해 DTO를 immutable로 관리. 이를 위해 [`freezed`](https://pub.dev/packages/freezed) 라이브러리 사용.
- `freezed` 사용 시에는 `extends` 아닌 `with` 사용해야 한다.

## `freezed` 사용하여 모델 생성

```dart
// This file is "main.dart"
import 'package:freezed_annotation/freezed_annotation.dart';
import 'package:flutter/foundation.dart';

// required: associates our `main.dart` with the code generated by Freezed
part 'main.freezed.dart';
// optional: Since our Person class is serializable, we must add this line.
// But if Person was not serializable, we could skip it.
part 'main.g.dart';

/// 3개의 속성 `firstName`, `lastName`, `age`을 가지며, 이 속성들은 immutable
@freezed /// 이 클래스에 대한 코드를 생성해달라는 의미
/// `copyWith`, `toString`, `operator ==`, `hashCode` 자동 생성
/// `@Freezed`/`@unfreezed`도 있다
class Person with _$Person {
///             👆 `_$` 접두사가 붙은 클래스를 mixin 적용
///👇 optional
  const factory Person({
///      👆 `factory` 키워드를 사용해야 한다
    required String firstName,
    required String lastName,
    required int age,
/// 파라미터들은 이 클래스가 갖게 되는 속성의 목록이 된다. named 또는 required 일 필요 없다.
  }) = _Person;

  factory Person.fromJson(Map<String, Object?> json)
      => _$PersonFromJson(json);
}
```

> `factory`?
>
> - `factory` 생성자는 클래스의 인스턴스를 반환할 수 있지만 반드시 새로운 인스턴스를 생성할 필요는 없다.
> - 싱글톤 패턴, 객체 풀링, 캐싱 등과 같은 고급 패턴을 구현할 수 있게 해준다
>
> 왜 `factory` 사용?
>
> 1. 재사용: 이미 생성된 인스턴스를 재사용할 수 있습니다. 이는 메모리 사용량을 줄이고 성능을 향상시킵니다.
> 2. 타입 변환: factory 생성자는 부모 클래스의 인스턴스를 반환하는 대신, 하위 클래스나 구현한 인터페이스의 인스턴스를 반환할 수 있습니다.
> 3. 명시적인 이름: factory 생성자는 명명된 생성자(named constructors)를 활용하여 의도를 더 명확하게 표현할 수 있습니다.

## sealed class

- [Sealed Classes in Dart: Unlocking Powerful Features](https://medium.com/@aliammariraq/sealed-classes-in-dart-unlocking-powerful-features-d8dba185925f)
