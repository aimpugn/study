# build

- [build](#build)

## 효율적인 위젯 트리로 변경된 부분만 다시 빌드

### 위젯 트리 (Widget Tree)

Flutter 앱은 위젯 트리로 구성된다. 이 트리는 상태가 변경될 때마다 부분적으로 또는 전체적으로 다시 빌드될 수 있지만, Flutter는 변경된 부분만을 효율적으로 다시 빌드한다

### 불변성 (Immutability)

Flutter에서 위젯은 불변(immutable). 즉, 한 번 생성되면 변경될 수 없다. 상태가 변경되면 새로운 위젯 인스턴스가 생성되고, 이전 위젯과 비교된다.

### Element와 RenderObject

- `Element`: 위젯 인스턴스와 렌더링 엔진 사이의 다리 역할. Element는 위젯의 구성(configuration)이 변경될 때 재사용될 수 있다
- `RenderObject`: 실제 렌더링 로직을 포함하고, 위젯의 레이아웃, 페인팅 등을 담당

### 작동 방식

1. 위젯 빌드: `build()` 메서드가 호출되면, 새로운 위젯 트리가 생성된다
2. 트리 비교: 새로운 위젯 트리와 이전 위젯 트리가 비교된다
3. Element 재사용: 변경되지 않은 위젯은 기존 `Element`와 `RenderObject`를 재사용
4. RenderObject 업데이트: 변경된 위젯은 새로운 `Element`와 `RenderObject`를 생성하거나 업데이트
5. 렌더링: 최종적으로 변경된 `RenderObject`만을 대상으로 렌더링이 수행된다

이러한 메커니즘 덕분에, 상태가 변경되더라도 실제로 변경된 부분만 다시 빌드와 렌더링이 일어나므로 성능이 효율적으로 관리된다

### 성능 최적화

더 나아가, Flutter는 다양한 수준에서 성능 최적화를 지원

- `const` 위젯: 상태가 없고 항상 동일한 위젯은 const로 선언하여 빌드 과정을 생략할 수 있음
- `GlobalKey`: 위젯 트리에서 **위젯을 유일하게 식별**할 수 있게 해서 `Element`의 재사용을 더 효율적으로 만든다
- `ListView.builder`: 대량의 아이템을 효율적으로 렌더링하기 위한 빌더 패턴을 제공
