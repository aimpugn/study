# tty

- [tty](#tty)
    - [TTY (Teletypewriter)?](#tty-teletypewriter)
    - [TTY 장치와 Linux 콘솔](#tty-장치와-linux-콘솔)
    - [Mac에서의 TTY와 PTY 사용?](#mac에서의-tty와-pty-사용)
    - [예시: Mac에서 TTY와 PTY 사용](#예시-mac에서-tty와-pty-사용)
    - [요약](#요약)

## TTY (Teletypewriter)?

TTY는 전통적으로 텍스트 기반 입력과 출력을 위한 장치입니다.
초기 컴퓨터 시스템에서는 실제 하드웨어 장치였으며, 사용자는 키보드를 통해 입력하고 출력은 프린터나 모니터를 통해 볼 수 있었습니다.

현대 시스템에서는 물리적인 하드웨어 대신 소프트웨어적으로 구현된 가상 터미널을 의미합니다.
사용자는 터미널 에뮬레이터나 콘솔을 통해 TTY와 상호작용합니다.

TTY는 하드웨어 터미널 또는 소프트웨어 터미널 인터페이스를 의미하며, 셸은 그 안에서 실행되는 프로그램입니다.

TTY의 역할:
- 사용자의 입력을 받아 셸에 전달하는 역할
- 셸의 출력을 사용자에게 보여주는 역할

## TTY 장치와 Linux 콘솔

**Linux 콘솔**:

Linux 시스템에서는 여러 개의 가상 콘솔(virtual console)을 사용할 수 있습니다.
각 가상 콘솔은 TTY 장치에 연결되어 있으며, 사용자가 물리적 키보드와 모니터를 통해 접근할 수 있습니다.

예를 들어, Ctrl+Alt+F1~F6을 누르면 각각의 가상 콘솔로 전환됩니다.
이때, 각 콘솔은 `/dev/tty1`, `/dev/tty2`, ..., `/dev/tty6`에 해당하는 TTY 장치로 연결됩니다.
이러한 콘솔들은 그래픽 사용자 인터페이스(GUI) 환경과는 별도로 동작하며, 텍스트 기반의 인터페이스를 제공합니다.

**agetty**:

시스템 부팅 시, `agetty`와 같은 프로그램이 실행되어 사용자가 로그인할 수 있는 TTY 세션을 설정합니다.
`agetty`는 특정 TTY 장치와 연결되며, 로그인 프롬프트를 제공하고 사용자가 로그인하면 셸을 시작합니다.

## Mac에서의 TTY와 PTY 사용?

MacOS에서는 Linux와 같은 가상 콘솔과 TTY 장치 전환 기능이 없습니다.
대신 터미널 애플리케이션을 사용하여 셸에 접근합니다.
Mac에서 TTY와 PTY를 사용하는 주요 방법은 다음과 같습니다:

1. **터미널 에뮬레이터**:
   - MacOS에는 기본적으로 터미널 애플리케이션(Terminal.app)이 제공됩니다.
   - iTerm2와 같은 서드파티 터미널 에뮬레이터도 많이 사용됩니다.

2. **TTY 장치**:
   - 터미널에서 `tty` 명령을 실행하여 현재 셸이 연결된 TTY 장치를 확인할 수 있습니다.

   ```sh
   $ tty
   /dev/ttys000
   ```

3. **PTY 사용**:
   - **SSH**: `ssh` 명령을 사용하여 원격 서버에 접속할 때 PTY를 사용합니다.
   - **tmux/screen**: MacOS에서도 `tmux`나 `screen`을 설치하여 사용할 수 있습니다. 이를 통해 여러 터미널 세션을 관리할 수 있습니다.
   - **Terminal Multiplexing**: `tmux`나 `screen`을 사용하면, 하나의 터미널 내에서 여러 세션을 열고 전환할 수 있습니다.

## 예시: Mac에서 TTY와 PTY 사용

1. **현재 TTY 확인**:

   ```sh
   $ tty
   /dev/ttys000
   ```

2. **SSH 사용**:

   ```sh
   ssh user@remote-server
   ```

3. **tmux 사용**:
   - **설치**: `brew`를 사용하여 `tmux`를 설치할 수 있습니다.

   ```sh
   brew install tmux
   ```

   - **tmux 세션 시작**:

   ```sh
   tmux
   ```

   - **새 창 열기**: Ctrl+b를 누른 후, c를 누르면 새로운 창을 열 수 있습니다.
   - **창 간 전환**: Ctrl+b를 누른 후, n(다음 창) 또는 p(이전 창)를 누르면 됩니다.

## 요약

- **Linux 콘솔**: Ctrl+Alt+F1~F6 키를 사용하여 여러 가상 콘솔로 전환할 수 있는 기능이 있으며, 각 콘솔은 TTY 장치에 연결됩니다.
- **agetty**: Linux 부팅 시 실행되어 TTY 세션을 설정하고 로그인 프롬프트를 제공하는 프로그램입니다.
- **MacOS**: Linux와 같은 가상 콘솔 기능은 없지만, 터미널 애플리케이션을 사용하여 TTY와 PTY 기능을 활용할 수 있습니다. `tty` 명령으로 현재 TTY를 확인하고, `ssh`, `tmux`, `screen` 등을 사용하여 PTY를 활용할 수 있습니다.
