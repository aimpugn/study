# rg

- [rg](#rg)
    - [rg?](#rg-1)
    - [options](#options)
        - [`-o`](#-o)
        - [`--files-without-match`](#--files-without-match)
        - [`-i`](#-i)
        - [`-g`, `--glob`](#-g---glob)
    - [특정 패턴을 포함하면서 특정 문자열 포함한 경우 제외하기](#특정-패턴을-포함하면서-특정-문자열-포함한-경우-제외하기)
    - [특정 파일, 특정 패턴의 파일, 특정 디렉토리 제외](#특정-파일-특정-패턴의-파일-특정-디렉토리-제외)
        - [`.ignore` 파일 사용하기](#ignore-파일-사용하기)
    - [AND와 OR 조건](#and와-or-조건)
        - [OR 조건](#or-조건)
        - [AND 조건](#and-조건)
        - [복잡한 조건](#복잡한-조건)
        - [주의 사항](#주의-사항)
    - [파일명 검색](#파일명-검색)
    - [파일명, 디렉토리, 파일 내용 모두 검색](#파일명-디렉토리-파일-내용-모두-검색)
        - [1. 파일 및 디렉토리 이름 검색](#1-파일-및-디렉토리-이름-검색)
        - [2. 파일 내용 검색](#2-파일-내용-검색)
        - [3. 파일 이름, 디렉토리 이름, 파일 내용 모두 검색](#3-파일-이름-디렉토리-이름-파일-내용-모두-검색)
        - [4. 결합하여 사용](#4-결합하여-사용)

## rg?

## options

### `-o`

일치하는 패턴만 출력한다. 즉, 전체 라인이 아닌 일치하는 부분만 반환한다.

### `--files-without-match`

매치되지 않은 파일들

### `-i`

- `-i`: 대소문자 구분 없이 검색하려면 `-i` 옵션을 추가합니다.

  ```bash
  rg -i -g 'example.txt' --files
  ```

- `--ignore-case`: `-i`와 동일하게 대소문자를 구분하지 않고 검색합니다.

### `-g`, `--glob`

- `--glob` 대신 `-g`: `--glob`는 `-g`와 동일한 역할을 합니다.

## 특정 패턴을 포함하면서 특정 문자열 포함한 경우 제외하기

```bash
rg '\->begin\(\)' -g !'Test'
```

## 특정 파일, 특정 패턴의 파일, 특정 디렉토리 제외

- 특정 파일을 검색에서 제외

    `--glob` 옵션을 사용하여 해당 파일을 제외시킬 수 있습니다.

    예를 들어, `config.json` 파일을 검색에서 제외하려면 다음과 같이 명령을 실행합니다.

    ```bash
    rg pattern --glob '!config.json'
    ```

- 특정 패턴에 맞는 파일들을 검색에서 제외

    패턴을 `!`로 시작하는 글로브 패턴과 함께 사용합니다.

    예를 들어, 모든 `.log` 파일을 검색에서 제외하려면 다음과 같이 실행합니다.

    ```bash
    rg pattern --glob '!*.log'
    ```

- 특정 디렉토리를 검색에서 제외

    그 디렉토리를 `--glob` 옵션으로 명시적으로 제외합니다.

    예를 들어, `node_modules` 디렉토리를 제외하려면 다음과 같이 명령을 실행합니다.

    ```bash
    rg pattern --glob '!node_modules/*'
    ```

- 여러 파일이나 디렉토리를 제외

    `--glob` 옵션을 여러 번 사용합니다.

    예를 들어, `node_modules` 디렉토리와 `.log` 파일을 모두 제외하려면 다음과 같이 실행합니다.

    ```bash
    rg pattern --glob '!node_modules/*' --glob '!*.log'
    ```

### `.ignore` 파일 사용하기

많은 파일이나 복잡한 패턴을 제외해야 하는 경우 `.ignore` 파일을 사용하는 것이 효과적일 수 있습니다. `rg`는 기본적으로 `.gitignore`와 동일한 형식의 `.ignore` 파일을 읽어 해당 패턴에 맞는 파일을 자동으로 제외합니다.

`.ignore` 파일에 다음과 같이 작성하여 `node_modules` 디렉토리와 `.log` 파일을 제외할 수 있습니다.

```bash
node_modules/
*.log
```

그리고 단순히 `rg` 명령어를 실행하면, 자동으로 `.ignore` 파일에 명시된 규칙을 적용하여 검색합니다.

```bash
rg pattern
```

`ripgrep`은 강력한 검색 옵션과 함께 사용자 친화적인 문법을 제공하므로, 매우 유연하게 검색 조건을 지정할 수 있습니다. 추가 옵션은 `rg --help`를 통해 확인할 수 있습니다.

## AND와 OR 조건

### OR 조건

"OR" 조건은 정규 표현식의 `|` 연산자를 사용하여 구현할 수 있습니다. 예를 들어, "apple" 또는 "banana"를 포함하는 모든 줄을 찾으려면 다음과 같이 할 수 있습니다:

```bash
rg 'apple|banana'
```

`rg`에서 `OR` 조건을 사용하려면 정규 표현식을 사용하고, 표현식 내에서 `|` 기호를 사용합니다. 예를 들어, "apple" 또는 "banana"가 포함된 파일을 검색하려면 다음과 같이 합니다:

```bash
rg 'apple|banana'
```

### AND 조건

`rg`는 직접적인 `AND` 조건을 지원하지 않습니다. 하지만, `AND` 조건을 구현하려면 몇 가지 방법이 있습니다. 한 방법은 `rg`의 결과를 파이프로 다른 `rg` 호출에 전달하여, 첫 번째 조건에 맞는 결과에서만 두 번째 조건을 검색하는 것입니다. 예를 들어, "apple"과 "banana"가 모두 포함된 파일을 찾으려면 다음과 같이 합니다:

```bash
rg 'apple' | rg 'banana'
```

또 다른 방법은 `-e` 옵션을 여러 번 사용하는 것입니다. 이 옵션은 여러 패턴을 동시에 검색하게 하지만, 각각에 대해 별도의 검색을 수행하며 `AND` 연산과는 다릅니다. 하지만, 특정 사용 사례에서 유용할 수 있습니다:

```bash
rg -e 'apple' -e 'banana'
```

"AND" 조건은 Ripgrep만으로 직접 구현하기 어렵습니다. 하지만, 여러 `rg` 명령어를 파이프라인으로 연결하거나, 더 복잡한 정규 표현식을 사용하여 간접적으로 구현할 수 있습니다.

예를 들어, "apple"과 "banana"를 모두 포함하는 파일을 찾으려면, 두 번의 `rg` 검색을 파이프라인으로 연결할 수 있습니다:

```bash
rg 'apple' | rg 'banana'
```

이 방법은 "apple"을 포함하는 줄을 찾은 다음, 그 결과에서 "banana"를 포함하는 줄을 찾습니다. 하지만, 이 방법은 "apple"과 "banana"가 같은 줄에 있을 때만 작동합니다.

파일 단위로 "apple"과 "banana"를 모두 포함하는 파일을 찾으려면, `xargs`와 함께 사용할 수 있습니다:

```bash
rg -l 'apple' | xargs rg 'banana'
```

여기서, `rg -l 'apple'`은 "apple"을 포함하는 모든 파일의 이름을 출력하고, `xargs rg 'banana'`는 이 파일들 중 "banana"를 포함하는 파일을 검색합니다.

### 복잡한 조건

더 복잡한 "AND" 및 "OR" 조건은 정규 표현식의 고급 기능을 사용하여 구현할 수 있습니다. 하지만, 이는 정규 표현식의 복잡성에 따라 상당히 어려울 수 있으며, 경우에 따라서는 다른 도구나 스크립트를 사용하는 것이 더 적합할 수 있습니다.

Ripgrep은 매우 빠른 검색 속도로 유명하지만, 모든 유형의 복잡한 검색 요구 사항을 직접적으로 지원하지는 않습니다. 때로는 `grep`, `awk`, `sed` 같은 다른 텍스트 처리 도구와 함께 사용하여 원하는 결과를 얻는 것이 좋습니다.

### 주의 사항

- 위의 `AND` 조건 예시는 첫 번째 검색에서 나온 결과를 기반으로 두 번째 조건을 적용합니다. 이는 `AND` 조건이 모든 파일에 동시에 적용되는 것과는 다를 수 있으므로, 실제 요구 사항에 따라 적절한 방법을 선택해야 합니다.
- `rg`의 `-e` 옵션은 여러 패턴을 검색할 수 있지만, 이는 `OR` 조건에 더 가깝습니다.

`rg`를 사용할 때 `OR`과 `AND` 조건을 효과적으로 사용하려면, 정규 표현식과 명령어 체이닝을 적절히 활용하는 것이 중요합니다. 사용 사례에 따라 조건을 조합하여 원하는 결과를 얻을 수 있습니다.

## 파일명 검색

예를 들어, 특정 파일명을 검색하고자 할 때 다음과 같이 사용할 수 있습니다:

```bash
rg -g '패턴' --files
```

1. **특정 파일명을 검색**: `example.txt` 파일을 검색하려면

   ```bash
   rg -g 'example.txt' --files
   ```

2. **특정 확장자를 가진 모든 파일을 검색**: `.txt` 파일을 모두 검색하려면

   ```bash
   rg -g '*.txt' --files
   ```

3. **부분적으로 일치하는 파일명을 검색**: `example`이라는 단어가 포함된 파일을 검색하려면

   ```bash
   rg -g '*example*' --files
   ```

4. **하위 디렉토리 포함 모든 파일 검색**: 모든 하위 디렉토리에서 `example.txt` 파일을 검색하려면:

   ```bash
   rg -g '**/example.txt' --files
   ```

## 파일명, 디렉토리, 파일 내용 모두 검색

- `rg --files --glob '**/패턴*'`: 파일 이름 검색
- `find . -type d -name '*패턴*'`: 디렉토리 이름 검색
- `rg 'example'`: 파일 내용 검색

1. **파일 및 디렉토리 이름 검색**:
   `--files` 옵션을 사용하여 파일 이름을 검색할 수 있고, `--directories` 옵션을 사용하여 디렉토리 이름을 검색할 수 있습니다.

2. **파일 내용 검색**:
   기본적으로 `rg`는 파일 내용을 검색합니다.

여기에서 주요 옵션을 설명하고 예제를 제공합니다.

### 1. 파일 및 디렉토리 이름 검색

`rg`는 기본적으로 파일과 디렉토리 이름을 검색하지 않기 때문에,
`find` 명령을 함께 사용하여 파일과 디렉토리 이름을 검색할 수 있습니다.

```bash
# `패턴`이 포함된 파일 및 디렉토리 이름을 검색
rg --files --glob '**/패턴*' && find . -type d -name '*패턴*'
```

### 2. 파일 내용 검색

기본적으로 `rg`는 파일 내용을 검색합니다.

```bash
rg 'example'
```

### 3. 파일 이름, 디렉토리 이름, 파일 내용 모두 검색

다음은 파일 이름, 디렉토리 이름, 그리고 파일 내용을 모두 검색하는 방법입니다.

```bash
# 파일 내용과 파일 이름 검색
rg --files --glob '**/*example*' && rg 'example'
```

위의 명령어는 `example`이 포함된 파일 이름을 검색한 후, `example`이 포함된 파일 내용을 검색합니다.

### 4. 결합하여 사용

```bash
# 파일 이름, 디렉토리 이름, 파일 내용을 모두 검색
(rg --files --glob '**/*example*' && find . -type d -name '*example*') && rg 'example'
```

이 명령은 세 부분으로 나눌 수 있습니다:
1. `rg --files --glob '**/*example*'`: `example`이 포함된 파일 이름 검색
2. `find . -type d -name '*example*'`: `example`이 포함된 디렉토리 이름 검색
3. `rg 'example'`: `example`이 포함된 파일 내용 검색
