# char

## `char`?

Rust의 `char` 타입은 *유니코드 스칼라 값*을 나타내며, 가장 일반적인 문자 단위인 UTF-8 인코딩을 사용합니다.
`char` 타입은 4바이트를 사용하여 UTF-8의 모든 유효한 문자를 표현할 수 있습니다.
이는 Rust가 유니코드 문자를 완벽하게 지원함을 의미합니다.
하나의 `char`는 UTF-8 인코딩된 문자열 중 하나의 유니코드 스칼라 값을 담고 있습니다.

Rust의 `char` 타입은 유니코드 문자를 처리하기 위한 강력하고 유연한 도구를 제공합니다. 이를 통해 다국어 지원과 문자 데이터 처리를 간편하게 할 수 있으며, 프로그래머가 문자 인코딩 문제로부터 상당히 자유로울 수 있도록 설계되었습니다.

### 유니코드 스칼라?

> 유니코드 스칼라 값은 모든 유니코드 문자를 대표하는 유효한 코드 포인트

유니코드는 전 세계의 모든 문자 시스템을 하나의 일관된 문자 집합으로 표현하기 위한 국제 표준입니다. 이를 통해 컴퓨터 시스템에서 텍스트를 교차 플랫폼, 교차 언어로 일관되게 표현하고 처리할 수 있습니다. 유니코드는 각 글자에 유니크한 코드 포인트(숫자)를 할당합니다.

유니코드 스칼라 값은 유니코드 표준에 의해 정의된 코드 포인트의 부분 집합입니다. 이는 다음 범위의 값들을 포함합니다
- `U+0000` ~ `U+D7FF`
- `U+E000` ~ `U+10FFFF`

`U+D800` ~ `U+DFFF` 범위는 제외됩니다. 이 범위는 UTF-16 인코딩에서 서로게이트 쌍을 위해 예약되어 있습니다.

스칼라 값은 *이러한 코드 포인트 중에서 유효한 문자를 나타내는 값들*입니다.

## 기본 특성

- **크기**: `char`는 항상 4바이트 크기를 갖습니다.
- **범위**: `char`는 U+0000부터 U+D7FF까지, 그리고 U+E000부터 U+10FFFF까지의 유니코드 스칼라 값을 포함할 수 있습니다. 이는 UTF-16 서로게이트 페어 영역을 제외한 모든 유니코드 값을 포함합니다.

## 문자 생성과 사용

Rust에서 `char`를 선언하고 사용하는 방법은 매우 직관적입니다. 예를 들어:

```rust
fn main() {
    let c: char = 'A';
    let emoji: char = '😊';
    let heart: char = '\u{2764}';

    println!("Character: {}", c);
    println!("Emoji: {}", emoji);
    println!("Heart: {}", heart);
}
```

이 예제에서는 다음을 보여줍니다:
- **문자 선언**: `'A'`처럼 간단한 문자를 선언할 수 있습니다.
- **이모티콘**: Rust에서는 이모티콘도 하나의 `char`로 처리할 수 있습니다. 이모티콘은 보통 더 많은 바이트를 사용하므로 `char`의 4바이트 크기가 유용합니다.
- **유니코드 이스케이프**: `\u{2764}`는 유니코드 이스케이프 시퀀스를 사용하여 특정 코드 포인트의 문자를 생성합니다. 이 경우 '❤️' (심장)을 나타냅니다.

## 문자열과 `char`

Rust에서 문자열은 `str` 타입으로 표현되며, 이는 UTF-8 인코딩된 바이트의 슬라이스입니다. 문자열에서 개별 `char`를 처리하려면 `.chars()` 메서드를 사용하여 이터레이터로 변환해야 합니다:

```rust
fn main() {
    let s = "Hello, 😊!";
    for ch in s.chars() {
        println!("{}", ch);
    }
}
```

이 코드는 문자열의 각 `char`를 개별적으로 반복하여 출력합니다. 이모티콘 '😊'도 하나의 `char`로 취급됩니다.

## `char` 기본 값

Rust에서 `char`의 "빈" 값이나 기본 값으로 사용할 수 있는 것은 없습니다. 그러나, 함수에서 `char` 값을 반환해야 하고 실패할 수 있는 상황을 처리해야 한다면, `Option<char>` 타입을 사용하는 것이 일반적입니다. `Option<char>`는 `Some(char)` 또는 `None`을 반환할 수 있어, `char` 값의 존재 여부를 표현할 수 있습니다.

## "빈" `char`는 불가능

문자열에서와 같이 직접적으로 "빈" `char` 값을 정의하는 것은 불가능합니다.

`char` 타입은 하나의 유니코드 스칼라 값을 저장하기 위한 것입니다. 따라서 `char`는 항상 유니코드 스칼라 값을 표현해야 합니다.
유니코드 스칼라 값은 실제로 존재하는 문자를 표현하는 값이기 때문에, "빈" 값이란 존재할 수 없습니다.
모든 스칼라 값은 어떤 문자를 대표하므로, Rust에서는 `char`가 반드시 유효한 유니코드 스칼라 값을 저장해야 합니다.

`char` 타입은 UTF-8 문자를 나타내며, Rust에서는 4바이트 크기로 유효한 UTF-8 문자를 하나 저장할 수 있습니다.

## 예시 코드

`unwrap_or_else`를 사용하여 `Option<char>`에서 안전하게 `char` 값을 처리하는 방법을 보여주는 예시입니다:

```rust
fn get_first_char(s: &str) -> Option<char> {
    s.chars().next()
}

fn main() {
    let text = "hello";
    let first_char = get_first_char(text).unwrap_or_else(|| '\0');  // 기본값으로 '\0' (null character)을 사용
    println!("The first character is: {}", first_char);
}
```

이 예제에서 `get_first_char` 함수는 문자열의 첫 번째 문자를 반환하거나, 문자열이 비어 있으면 `None`을 반환합니다. `unwrap_or_else`는 `Option<char>`이 `None`인 경우 기본값으로 `'\0'` (null 문자)을 제공합니다.

## `char` 사용에 있어서 주의할 점

- `char`는 최소 1바이트 크기의 문자를 나타냅니다. Rust의 `char` 타입은 UTF-8 인코딩을 사용하여 1에서 4바이트까지 다양한 크기를 가질 수 있습니다.
- 문자열에서 `char`를 추출하거나 작업할 때는 `.chars()` 메서드를 통해 이터레이터를 사용하는 것이 일반적입니다.
- `char` 타입은 `Option<char>`과 함께 사용되어, 문자의 존재 유무를 안전하게 처리할 수 있도록 합니다.
